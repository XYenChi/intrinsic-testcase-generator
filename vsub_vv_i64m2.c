/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  175, 119, 206, 187, 113, 115, 63, 195, 50, 222, 211, 243, 163, 111, 192, 238, 158, 250, 109, 33, 94, 90, 168, 138, 88, 162, 68, 161, 3, 56, 37, 20, 4, 90, 126, 103, 235, 52, 123, 112, 161, 20, 0, 117, 199, 31, 64, 178, 144, 199, 79, 53, 254, 140, 68, 126, 160, 90, 124, 231, 235, 248, 178, 177
  };
  const int *in1 = &data1[0];
    int data2[] = {
  101, 91, 167, 154, 99, 237, 56, 170, 90, 172, 41, 39, 174, 250, 238, 195, 127, 72, 214, 127, 144, 5, 252, 119, 230, 114, 50, 119, 218, 102, 23, 92, 10, 19, 144, 40, 46, 2, 64, 209, 43, 233, 7, 40, 211, 178, 57, 14, 108, 7, 247, 121, 119, 7, 98, 55, 241, 73, 22, 129, 30, 170, 82, 61
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint64m2_t out = __riscv_vsub_vv_i64m2 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  74, 28, 39, 33, 14, -122, 7, 25, -40, 50, 170, 204, -11, -139, -46, 43, 31, 178, -105, -94, -50, 85, -84, 19, -142, 48, 18, 42, -215, -46, 14, -72, -6, 71, -18, 63, 189, 50, 59, -97, 118, -213, -7, 77, -12, -147, 7, 164, 36, 192, -168, -68, 135, 133, -30, 71, -81, 17, 102, 102, 205, 78, 96, 116
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
