/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  97, 238, 168, 87, 213, 59, 74, 210, 253, 137, 108, 250, 30, 167, 12, 117, 74, 121, 61, 183, 220, 106, 179, 29, 71, 160, 145, 1, 65, 138, 53, 117, 82, 166, 70, 66, 40, 130, 165, 14, 158, 21, 108, 147, 162, 234, 248, 107, 250, 190, 129, 118, 216, 117, 140, 164, 0, 116, 54, 17, 248, 162, 164, 246
  };
  const int *in1 = &data1[0];
    int data2[] = {
  151, 56, 102, 70, 119, 211, 31, 131, 254, 231, 224, 149, 97, 226, 179, 88, 241, 199, 171, 35, 16, 75, 200, 85, 212, 0, 1, 54, 229, 132, 64, 19, 73, 201, 98, 47, 49, 245, 39, 170, 224, 60, 92, 147, 66, 87, 49, 119, 193, 182, 45, 122, 73, 68, 1, 185, 141, 5, 178, 29, 160, 236, 230, 117
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint8mf2_t out = __riscv_vsub_vx_i8mf2 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -54, 182, 66, 17, 94, -152, 43, 79, -1, -94, -116, 101, -67, -59, -167, 29, -167, -78, -110, 148, 204, 31, -21, -56, -141, 160, 144, -53, -164, 6, -11, 98, 9, -35, -28, 19, -9, -115, 126, -156, -66, -39, 16, 0, 96, 147, 199, -12, 57, 8, 84, -4, 143, 49, 139, -21, -141, 111, -124, -12, 88, -74, -66, 129
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
