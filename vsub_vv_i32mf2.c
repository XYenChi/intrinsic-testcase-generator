/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  178, 127, 78, 153, 112, 176, 9, 239, 122, 17, 5, 172, 181, 162, 212, 183, 150, 19, 4, 49, 96, 187, 60, 225, 123, 175, 157, 228, 198, 144, 199, 209, 89, 59, 157, 228, 199, 191, 192, 205, 48, 43, 45, 65, 178, 245, 77, 104, 20, 142, 98, 138, 208, 15, 193, 70, 117, 27, 109, 47, 176, 254, 113, 148
  };
  const int *in1 = &data1[0];
    int data2[] = {
  91, 15, 191, 22, 74, 100, 122, 180, 193, 58, 15, 188, 230, 84, 240, 241, 110, 251, 78, 74, 163, 57, 216, 132, 19, 192, 47, 143, 124, 52, 82, 117, 228, 94, 10, 170, 172, 103, 48, 248, 173, 59, 248, 163, 246, 198, 165, 53, 181, 131, 204, 10, 191, 173, 20, 4, 30, 138, 82, 101, 4, 227, 169, 155
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint32mf2_t out = __riscv_vsub_vv_i32mf2 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  87, 112, -113, 131, 38, 76, -113, 59, -71, -41, -10, -16, -49, 78, -28, -58, 40, -232, -74, -25, -67, 130, -156, 93, 104, -17, 110, 85, 74, 92, 117, 92, -139, -35, 147, 58, 27, 88, 144, -43, -125, -16, -203, -98, -68, 47, -88, 51, -161, 11, -106, 128, 17, -158, 173, 66, 87, -111, 27, -54, 172, 27, -56, -7
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
