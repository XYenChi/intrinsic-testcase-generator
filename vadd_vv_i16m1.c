/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  106, 167, 211, 136, 125, 137, 16, 51, 205, 233, 43, 12, 6, 152, 71, 122, 157, 7, 126, 31, 64, 18, 44, 206, 133, 20, 93, 111, 77, 50, 190, 253, 137, 173, 177, 10, 151, 198, 74, 22, 245, 79, 164, 65, 166, 31, 135, 190, 67, 176, 91, 177, 86, 106, 214, 79, 157, 40, 149, 253, 11, 254, 30, 114
  };
  const int *in1 = &data1[0];
    int data2[] = {
  75, 152, 243, 237, 37, 105, 121, 25, 21, 143, 40, 87, 199, 92, 121, 133, 109, 5, 109, 239, 73, 87, 235, 92, 126, 8, 130, 196, 99, 150, 31, 170, 81, 139, 97, 183, 152, 161, 19, 194, 5, 191, 118, 29, 109, 39, 33, 201, 190, 10, 196, 35, 221, 7, 108, 163, 123, 100, 37, 204, 148, 98, 19, 204
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint16m1_t out = __riscv_vadd_vv_i16m1 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  181, 319, 454, 373, 162, 242, 137, 76, 226, 376, 83, 99, 205, 244, 192, 255, 266, 12, 235, 270, 137, 105, 279, 298, 259, 28, 223, 307, 176, 200, 221, 423, 218, 312, 274, 193, 303, 359, 93, 216, 250, 270, 282, 94, 275, 70, 168, 391, 257, 186, 287, 212, 307, 113, 322, 242, 280, 140, 186, 457, 159, 352, 49, 318
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
