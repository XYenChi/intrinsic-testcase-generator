/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  133, 86, 244, 43, 83, 172, 239, 13, 136, 175, 160, 249, 20, 251, 84, 105, 187, 46, 128, 197, 59, 236, 141, 102, 8, 237, 206, 172, 236, 41, 0, 17, 231, 72, 145, 34, 20, 244, 65, 215, 229, 142, 172, 236, 101, 252, 53, 0, 68, 157, 12, 85, 156, 149, 86, 203, 82, 248, 41, 133, 32, 100, 48, 227
  };
  const int *in1 = &data1[0];
    int data2[] = {
  94, 188, 246, 208, 230, 111, 13, 93, 97, 157, 179, 155, 170, 234, 245, 180, 104, 130, 48, 164, 220, 141, 226, 182, 210, 37, 237, 178, 229, 221, 53, 42, 254, 200, 114, 243, 160, 164, 122, 219, 187, 142, 153, 253, 204, 231, 107, 194, 32, 131, 239, 191, 180, 151, 143, 204, 21, 166, 92, 88, 51, 76, 101, 25
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint32m8_t out = __riscv_vadd_vx_i32m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  227, 274, 490, 251, 313, 283, 252, 106, 233, 332, 339, 404, 190, 485, 329, 285, 291, 176, 176, 361, 279, 377, 367, 284, 218, 274, 443, 350, 465, 262, 53, 59, 485, 272, 259, 277, 180, 408, 187, 434, 416, 284, 325, 489, 305, 483, 160, 194, 100, 288, 251, 276, 336, 300, 229, 407, 103, 414, 133, 221, 83, 176, 149, 252
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
