/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  44, 135, 25, 121, 174, 131, 50, 146, 67, 216, 204, 253, 198, 10, 156, 169, 235, 210, 254, 49, 59, 1, 0, 189, 89, 127, 99, 0, 94, 62, 228, 65, 44, 79, 195, 150, 92, 51, 212, 238, 122, 214, 220, 41, 81, 160, 110, 186, 75, 70, 174, 166, 56, 70, 154, 130, 128, 236, 152, 146, 229, 49, 115, 108
  };
  const int *in1 = &data1[0];
    int data2[] = {
  196, 16, 209, 152, 212, 146, 137, 143, 228, 19, 217, 237, 61, 52, 38, 176, 171, 203, 221, 70, 107, 25, 151, 43, 246, 32, 121, 168, 185, 128, 84, 238, 200, 127, 110, 191, 203, 11, 14, 203, 8, 197, 230, 198, 173, 149, 0, 99, 132, 81, 197, 158, 27, 255, 133, 169, 80, 4, 101, 149, 178, 254, 221, 80
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint8m1_t out = __riscv_vsub_vv_i8m1 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -152, 119, -184, -31, -38, -15, -87, 3, -161, 197, -13, 16, 137, -42, 118, -7, 64, 7, 33, -21, -48, -24, -151, 146, -157, 95, -22, -168, -91, -66, 144, -173, -156, -48, 85, -41, -111, 40, 198, 35, 114, 17, -10, -157, -92, 11, 110, 87, -57, -11, -23, 8, 29, -185, 21, -39, 48, 232, 51, -3, 51, -205, -106, 28
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
