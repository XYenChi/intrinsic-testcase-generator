/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  196, 85, 12, 235, 118, 146, 181, 209, 94, 231, 86, 41, 87, 238, 252, 174, 171, 71, 150, 249, 41, 18, 222, 145, 56, 52, 105, 2, 214, 71, 31, 39, 209, 54, 89, 56, 243, 156, 216, 41, 124, 11, 39, 163, 224, 175, 61, 60, 21, 22, 173, 204, 237, 145, 60, 93, 215, 5, 193, 133, 73, 43, 102, 126
  };
  const int *in1 = &data1[0];
    int data2[] = {
  158, 74, 65, 219, 45, 208, 6, 236, 218, 180, 212, 127, 152, 213, 165, 8, 14, 248, 103, 176, 158, 103, 208, 239, 214, 68, 153, 8, 112, 254, 80, 71, 113, 91, 169, 179, 146, 110, 67, 223, 146, 7, 58, 233, 185, 146, 91, 194, 250, 134, 218, 250, 221, 79, 105, 238, 221, 82, 69, 211, 210, 191, 191, 223
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint64m8_t out = __riscv_vsub_vv_i64m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  38, 11, -53, 16, 73, -62, 175, -27, -124, 51, -126, -86, -65, 25, 87, 166, 157, -177, 47, 73, -117, -85, 14, -94, -158, -16, -48, -6, 102, -183, -49, -32, 96, -37, -80, -123, 97, 46, 149, -182, -22, 4, -19, -70, 39, 29, -30, -134, -229, -112, -45, -46, 16, 66, -45, -145, -6, -77, 124, -78, -137, -148, -89, -97
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
