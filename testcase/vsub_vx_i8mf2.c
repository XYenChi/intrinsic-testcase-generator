/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
    176, 165, 113, 127, 254, 204, 34, 101, 249, 249, 190, 122, 3, 231, 181, 105, 21, 48, 117, 107, 188, 220, 210, 200, 98, 187, 144, 9, 136, 131, 226, 5, 3, 84, 250, 91, 99, 221, 138, 2, 140, 187, 39, 178, 194, 7, 70, 24, 240, 2, 92, 223, 248, 107, 168, 27, 253, 212, 163, 56, 107, 190, 224, 33
    };
    const int *in1 = &data1[0];
    int data2[] = {
    17, 163, 195, 248, 103, 101, 207, 84, 5, 82, 210, 154, 137, 37, 115, 19, 232, 40, 35, 35, 162, 203, 31, 172, 126, 47, 72, 95, 168, 240, 219, 192, 31, 222, 52, 191, 242, 12, 51, 119, 70, 43, 114, 129, 162, 215, 248, 218, 105, 209, 198, 81, 47, 199, 33, 129, 234, 21, 233, 214, 66, 180, 128, 124
    };
    const int *in2 = &data2[0];
    int out_data[64];
    int *out = &out_data[0];
    for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
        vint8mf2_t out = __riscv_vsub_vx_i8mf2 (data1, data2, 64);
        in1 += Q_element;
        in2 += Q_element;
        out += Q_element;
  }
   int golden[] = {
   159, 2, -82, -121, 151, 103, -173, 17, 244, 167, -20, -32, -134, 194, 66, 86, -211, 8, 82, 72, 26, 17, 179, 28, -28, 140, 72, -86, -32, -109, 7, -187, -28, -138, 198, -100, -143, 209, 87, -117, 70, 144, -75, 49, 32, -208, -178, -194, 135, -207, -106, 142, 201, -92, 135, -102, 19, 191, -70, -158, 41, 10, 96, -91
   };
    int fail = 0;
    for (int i = 0; i < 64; i++)
        if (golden0[i] != out0_data[i]) {
            printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
            fail++;
            }
    if (fail) {
        return 1;
    } else {
        return 0;
    }
}
