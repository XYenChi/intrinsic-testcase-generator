/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
    147, 25, 217, 146, 252, 127, 203, 98, 197, 145, 186, 189, 123, 240, 247, 115, 192, 145, 157, 189, 83, 119, 77, 103, 250, 123, 50, 132, 78, 156, 126, 81, 176, 211, 3, 57, 74, 203, 244, 146, 27, 190, 56, 242, 109, 246, 75, 54, 6, 252, 134, 236, 43, 88, 135, 127, 221, 165, 164, 114, 6, 75, 252, 88
    };
    const int *in1 = &data1[0];
    int data2[] = {
    217, 62, 208, 136, 135, 108, 105, 249, 247, 96, 97, 205, 191, 129, 254, 169, 166, 211, 177, 157, 102, 89, 233, 118, 2, 241, 160, 137, 228, 160, 127, 95, 213, 149, 171, 136, 64, 237, 81, 244, 231, 210, 169, 61, 28, 145, 197, 20, 43, 202, 218, 30, 222, 12, 217, 155, 231, 148, 237, 103, 102, 31, 227, 220
    };
    const int *in2 = &data2[0];
    int out_data[64];
    int *out = &out_data[0];
    for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
        vint64m1_t out = __riscv_vsub_vv_i64m1 (data1, data2, 64);
        in1 += Q_element;
        in2 += Q_element;
        out += Q_element;
  }
   int golden[] = {
   -70, -37, 9, 10, 117, 19, 98, -151, -50, 49, 89, -16, -68, 111, -7, -54, 26, -66, -20, 32, -19, 30, -156, -15, 248, -118, -110, -5, -150, -4, -1, -14, -37, 62, -168, -79, 10, -34, 163, -98, -204, -20, -113, 181, 81, 101, -122, 34, -37, 50, -84, 206, -179, 76, -82, -28, -10, 17, -73, 11, -96, 44, 25, -132
   };
    int fail = 0;
    for (int i = 0; i < 64; i++)
        if (golden0[i] != out0_data[i]) {
            printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
            fail++;
            }
    if (fail) {
        return 1;
    } else {
        return 0;
    }
}
