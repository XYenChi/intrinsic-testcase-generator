/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
    151, 10, 4, 202, 34, 214, 14, 222, 185, 110, 129, 134, 189, 213, 215, 242, 174, 54, 88, 71, 30, 24, 165, 91, 176, 229, 34, 95, 206, 126, 31, 116, 79, 168, 200, 55, 5, 41, 142, 221, 27, 85, 69, 209, 12, 116, 127, 198, 80, 42, 168, 204, 44, 75, 29, 101, 124, 211, 54, 28, 94, 248, 243, 196
    };
    const int *in1 = &data1[0];
    int data2[] = {
    163, 191, 82, 133, 232, 38, 177, 134, 74, 78, 145, 40, 225, 213, 44, 249, 79, 33, 183, 118, 5, 190, 188, 163, 110, 78, 162, 102, 199, 134, 217, 133, 126, 238, 173, 104, 20, 196, 255, 14, 97, 223, 48, 129, 200, 158, 179, 46, 69, 247, 192, 8, 56, 219, 0, 196, 50, 41, 215, 30, 196, 226, 225, 86
    };
    const int *in2 = &data2[0];
    int out_data[64];
    int *out = &out_data[0];
    for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
        vint64m8_t out = __riscv_vsub_vv_i64m8 (data1, data2, 64);
        in1 += Q_element;
        in2 += Q_element;
        out += Q_element;
  }
   int golden[] = {
   -12, -181, -78, 69, -198, 176, -163, 88, 111, 32, -16, 94, -36, 0, 171, -7, 95, 21, -95, -47, 25, -166, -23, -72, 66, 151, -128, -7, 7, -8, -186, -17, -47, -70, 27, -49, -15, -155, -113, 207, -70, -138, 21, 80, -188, -42, -52, 152, 11, -205, -24, 196, -12, -144, 29, -95, 74, 170, -161, -2, -102, 22, 18, 110
   };
    int fail = 0;
    for (int i = 0; i < 64; i++)
        if (golden0[i] != out0_data[i]) {
            printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
            fail++;
            }
    if (fail) {
        return 1;
    } else {
        return 0;
    }
}
