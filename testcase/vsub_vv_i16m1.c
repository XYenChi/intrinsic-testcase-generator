/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
    66, 23, 243, 105, 249, 179, 100, 200, 202, 97, 141, 149, 233, 38, 105, 247, 223, 2, 100, 46, 107, 150, 91, 136, 115, 40, 14, 108, 26, 106, 161, 187, 210, 21, 215, 84, 38, 70, 135, 0, 31, 145, 255, 191, 100, 201, 243, 223, 168, 81, 107, 13, 133, 179, 139, 133, 108, 71, 124, 162, 86, 42, 127, 126
    };
    const int *in1 = &data1[0];
    int data2[] = {
    88, 204, 70, 245, 244, 200, 72, 151, 20, 246, 187, 44, 247, 142, 136, 181, 91, 161, 94, 122, 53, 95, 130, 69, 233, 171, 76, 225, 150, 149, 44, 190, 185, 209, 49, 253, 234, 100, 171, 209, 91, 231, 180, 108, 16, 249, 41, 180, 240, 108, 168, 139, 238, 90, 230, 214, 198, 10, 170, 63, 41, 38, 63, 120
    };
    const int *in2 = &data2[0];
    int out_data[64];
    int *out = &out_data[0];
    for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
        vint16m1_t out = __riscv_vsub_vv_i16m1 (data1, data2, 64);
        in1 += Q_element;
        in2 += Q_element;
        out += Q_element;
  }
   int golden[] = {
   -22, -181, 173, -140, 5, -21, 28, 49, 182, -149, -46, 105, -14, -104, -31, 66, 132, -159, 6, -76, 54, 55, -39, 67, -118, -131, -62, -117, -124, -43, 117, -3, 25, -188, 166, -169, -196, -30, -36, -209, -60, -86, 75, 83, 84, -48, 202, 43, -72, -27, -61, -126, -105, 89, -91, -81, -90, 61, -46, 99, 45, 4, 64, 6
   };
    int fail = 0;
    for (int i = 0; i < 64; i++)
        if (golden0[i] != out0_data[i]) {
            printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
            fail++;
            }
    if (fail) {
        return 1;
    } else {
        return 0;
    }
}
