/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  148, 173, 6, 199, 246, 231, 205, 79, 146, 137, 30, 248, 233, 51, 240, 51, 0, 93, 121, 23, 5, 196, 139, 181, 62, 18, 25, 120, 61, 211, 128, 188, 77, 118, 44, 29, 174, 154, 56, 145, 240, 171, 13, 160, 204, 152, 57, 118, 245, 26, 43, 141, 224, 214, 248, 98, 126, 65, 155, 120, 185, 0, 167, 121
  };
  const int *in1 = &data1[0];
    int data2[] = {
  133, 29, 36, 132, 18, 109, 121, 14, 221, 100, 22, 205, 124, 181, 192, 134, 202, 201, 191, 124, 133, 105, 67, 247, 9, 245, 222, 17, 77, 110, 234, 194, 172, 148, 63, 22, 220, 127, 79, 149, 224, 101, 106, 26, 195, 59, 38, 164, 100, 122, 219, 13, 17, 222, 153, 114, 240, 234, 154, 51, 240, 29, 221, 144
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint8m8_t out = __riscv_vsub_vx_i8m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  15, 144, -30, 67, 228, 122, 84, 65, -75, 37, 8, 43, 109, -130, 48, -83, -202, -108, -70, -101, -128, 91, 72, -66, 53, -227, -197, 103, -16, 101, -106, -6, -95, -30, -19, 7, -46, 27, -23, -4, 16, 70, -93, 134, 9, 93, 19, -46, 145, -96, -176, 128, 207, -8, 95, -16, -114, -169, 1, 69, -55, -29, -54, -23
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
