/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  142, 25, 245, 73, 131, 226, 50, 196, 78, 53, 91, 86, 232, 99, 66, 13, 253, 138, 189, 141, 208, 219, 99, 45, 44, 64, 178, 241, 198, 251, 117, 121, 33, 160, 148, 130, 60, 130, 97, 103, 15, 217, 67, 109, 218, 33, 221, 50, 209, 54, 117, 46, 253, 197, 52, 41, 119, 38, 237, 237, 189, 118, 63, 82
  };
  const int *in1 = &data1[0];
    int data2[] = {
  145, 66, 187, 31, 160, 143, 161, 229, 135, 90, 172, 150, 231, 12, 120, 230, 195, 207, 134, 74, 150, 90, 25, 249, 199, 3, 178, 162, 152, 8, 89, 229, 240, 141, 118, 73, 111, 113, 176, 16, 116, 210, 205, 135, 174, 155, 126, 241, 14, 8, 213, 177, 130, 142, 208, 72, 108, 89, 235, 38, 183, 121, 71, 241
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint8mf4_t out = __riscv_vsub_vx_i8mf4 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -3, -41, 58, 42, -29, 83, -111, -33, -57, -37, -81, -64, 1, 87, -54, -217, 58, -69, 55, 67, 58, 129, 74, -204, -155, 61, 0, 79, 46, 243, 28, -108, -207, 19, 30, 57, -51, 17, -79, 87, -101, 7, -138, -26, 44, -122, 95, -191, 195, 46, -96, -131, 123, 55, -156, -31, 11, -51, 2, 199, 6, -3, -8, -159
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
