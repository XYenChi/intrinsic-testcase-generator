/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  177, 212, 184, 167, 25, 115, 80, 0, 18, 165, 83, 205, 53, 31, 121, 53, 179, 241, 215, 253, 132, 204, 35, 45, 54, 117, 67, 122, 206, 159, 211, 200, 67, 141, 22, 87, 44, 222, 121, 74, 126, 108, 241, 167, 81, 74, 56, 131, 232, 206, 229, 142, 101, 154, 128, 78, 104, 42, 68, 66, 218, 10, 104, 206
  };
  const int *in1 = &data1[0];
    int data2[] = {
  98, 21, 173, 173, 86, 8, 150, 47, 117, 141, 139, 29, 118, 47, 109, 114, 39, 153, 110, 161, 251, 54, 142, 132, 54, 140, 41, 206, 185, 212, 75, 19, 41, 239, 48, 190, 46, 5, 171, 176, 103, 165, 204, 59, 53, 178, 147, 164, 250, 98, 255, 136, 47, 113, 83, 155, 160, 31, 103, 174, 7, 231, 51, 29
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint16m8_t out = __riscv_vadd_vv_i16m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  275, 233, 357, 340, 111, 123, 230, 47, 135, 306, 222, 234, 171, 78, 230, 167, 218, 394, 325, 414, 383, 258, 177, 177, 108, 257, 108, 328, 391, 371, 286, 219, 108, 380, 70, 277, 90, 227, 292, 250, 229, 273, 445, 226, 134, 252, 203, 295, 482, 304, 484, 278, 148, 267, 211, 233, 264, 73, 171, 240, 225, 241, 155, 235
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
