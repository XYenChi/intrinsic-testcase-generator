/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  208, 23, 88, 58, 231, 215, 97, 239, 247, 32, 170, 96, 84, 51, 20, 126, 148, 114, 235, 52, 58, 152, 97, 154, 118, 220, 243, 80, 121, 52, 120, 115, 35, 175, 145, 120, 210, 137, 194, 175, 133, 45, 133, 157, 84, 8, 84, 46, 95, 216, 7, 254, 251, 214, 223, 142, 124, 36, 141, 246, 158, 200, 194, 86
  };
  const int *in1 = &data1[0];
    int data2[] = {
  211, 162, 61, 137, 108, 132, 98, 235, 185, 111, 61, 123, 213, 212, 242, 23, 138, 0, 223, 195, 156, 48, 50, 64, 248, 52, 162, 62, 213, 238, 255, 252, 236, 118, 116, 86, 113, 113, 178, 89, 100, 131, 242, 122, 253, 121, 84, 110, 58, 78, 250, 192, 179, 2, 34, 112, 106, 90, 94, 170, 152, 82, 37, 137
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint32m1_t out = __riscv_vadd_vv_i32m1 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  419, 185, 149, 195, 339, 347, 195, 474, 432, 143, 231, 219, 297, 263, 262, 149, 286, 114, 458, 247, 214, 200, 147, 218, 366, 272, 405, 142, 334, 290, 375, 367, 271, 293, 261, 206, 323, 250, 372, 264, 233, 176, 375, 279, 337, 129, 168, 156, 153, 294, 257, 446, 430, 216, 257, 254, 230, 126, 235, 416, 310, 282, 231, 223
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
