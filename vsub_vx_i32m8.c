/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  36, 137, 51, 106, 189, 175, 140, 84, 15, 133, 127, 192, 148, 81, 10, 220, 251, 86, 28, 174, 126, 87, 84, 150, 212, 216, 204, 109, 11, 202, 178, 58, 8, 123, 206, 141, 65, 135, 83, 254, 221, 34, 229, 199, 176, 118, 165, 92, 16, 187, 136, 216, 89, 235, 174, 104, 153, 173, 151, 150, 8, 251, 150, 167
  };
  const int *in1 = &data1[0];
    int data2[] = {
  90, 54, 12, 32, 2, 24, 229, 64, 99, 106, 77, 141, 216, 224, 189, 149, 121, 79, 135, 17, 34, 115, 29, 155, 63, 21, 235, 200, 243, 133, 124, 62, 78, 218, 181, 215, 217, 22, 192, 126, 132, 225, 235, 57, 141, 230, 78, 58, 58, 146, 183, 80, 5, 115, 91, 61, 94, 127, 166, 206, 30, 24, 116, 3
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint32m8_t out = __riscv_vsub_vx_i32m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -54, 83, 39, 74, 187, 151, -89, 20, -84, 27, 50, 51, -68, -143, -179, 71, 130, 7, -107, 157, 92, -28, 55, -5, 149, 195, -31, -91, -232, 69, 54, -4, -70, -95, 25, -74, -152, 113, -109, 128, 89, -191, -6, 142, 35, -112, 87, 34, -42, 41, -47, 136, 84, 120, 83, 43, 59, 46, -15, -56, -22, 227, 34, 164
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
