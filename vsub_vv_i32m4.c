/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  173, 139, 244, 41, 7, 27, 171, 26, 41, 21, 31, 203, 221, 104, 200, 12, 119, 92, 145, 240, 183, 41, 40, 207, 22, 158, 63, 247, 14, 183, 172, 205, 241, 173, 146, 167, 123, 112, 35, 217, 185, 222, 51, 16, 44, 164, 19, 10, 136, 222, 209, 33, 176, 63, 246, 213, 63, 75, 228, 16, 186, 144, 244, 37
  };
  const int *in1 = &data1[0];
    int data2[] = {
  68, 156, 145, 78, 132, 200, 58, 172, 229, 27, 195, 238, 21, 240, 228, 134, 61, 122, 3, 138, 136, 151, 225, 103, 146, 118, 30, 85, 135, 3, 110, 110, 141, 103, 209, 70, 210, 240, 231, 246, 178, 101, 59, 210, 238, 130, 238, 108, 54, 206, 140, 221, 40, 40, 172, 232, 112, 88, 226, 154, 176, 16, 141, 187
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint32m4_t out = __riscv_vsub_vv_i32m4 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  105, -17, 99, -37, -125, -173, 113, -146, -188, -6, -164, -35, 200, -136, -28, -122, 58, -30, 142, 102, 47, -110, -185, 104, -124, 40, 33, 162, -121, 180, 62, 95, 100, 70, -63, 97, -87, -128, -196, -29, 7, 121, -8, -194, -194, 34, -219, -98, 82, 16, 69, -188, 136, 23, 74, -19, -49, -13, 2, -138, 10, 128, 103, -150
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
