/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  20, 210, 152, 124, 20, 40, 49, 45, 107, 161, 247, 156, 29, 210, 122, 183, 199, 89, 172, 174, 36, 213, 100, 227, 14, 139, 121, 210, 1, 158, 190, 69, 161, 44, 149, 147, 153, 151, 171, 153, 241, 8, 199, 196, 222, 249, 134, 177, 241, 47, 225, 154, 231, 161, 225, 42, 178, 19, 181, 0, 99, 161, 28, 87
  };
  const int *in1 = &data1[0];
    int data2[] = {
  170, 100, 161, 74, 62, 116, 59, 216, 187, 100, 239, 39, 12, 76, 104, 52, 92, 173, 69, 53, 163, 226, 170, 239, 113, 164, 255, 170, 206, 131, 28, 85, 166, 153, 225, 195, 181, 45, 88, 112, 127, 177, 162, 141, 90, 201, 224, 56, 204, 26, 86, 96, 199, 213, 140, 222, 27, 53, 211, 146, 241, 68, 206, 197
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint64m8_t out = __riscv_vsub_vx_i64m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -150, 110, -9, 50, -42, -76, -10, -171, -80, 61, 8, 117, 17, 134, 18, 131, 107, -84, 103, 121, -127, -13, -70, -12, -99, -25, -134, 40, -205, 27, 162, -16, -5, -109, -76, -48, -28, 106, 83, 41, 114, -169, 37, 55, 132, 48, -90, 121, 37, 21, 139, 58, 32, -52, 85, -180, 151, -34, -30, -146, -142, 93, -178, -110
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
