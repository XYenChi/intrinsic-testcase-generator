/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  65, 73, 111, 123, 243, 249, 30, 183, 189, 147, 220, 3, 203, 168, 104, 108, 200, 20, 153, 217, 107, 117, 133, 202, 31, 121, 144, 244, 100, 184, 159, 72, 17, 216, 24, 61, 29, 64, 249, 29, 123, 149, 240, 157, 91, 217, 213, 37, 93, 61, 202, 132, 192, 61, 140, 101, 155, 189, 43, 134, 190, 14, 146, 106
  };
  const int *in1 = &data1[0];
    int data2[] = {
  86, 16, 28, 133, 9, 23, 78, 132, 255, 205, 46, 182, 109, 124, 110, 60, 96, 1, 252, 150, 86, 67, 30, 210, 235, 43, 195, 63, 94, 119, 59, 36, 76, 166, 10, 3, 218, 30, 137, 130, 34, 1, 182, 97, 129, 252, 243, 8, 115, 102, 118, 130, 60, 196, 17, 236, 21, 83, 154, 91, 228, 184, 32, 41
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint8mf2_t out = __riscv_vsub_vv_i8mf2 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -21, 57, 83, -10, 234, 226, -48, 51, -66, -58, 174, -179, 94, 44, -6, 48, 104, 19, -99, 67, 21, 50, 103, -8, -204, 78, -51, 181, 6, 65, 100, 36, -59, 50, 14, 58, -189, 34, 112, -101, 89, 148, 58, 60, -38, -35, -30, 29, -22, -41, 84, 2, 132, -135, 123, -135, 134, 106, -111, 43, -38, -170, 114, 65
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
