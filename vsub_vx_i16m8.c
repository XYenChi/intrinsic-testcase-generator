/* { dg-do run } */
/* { dg-options "-march=rv64gcv -mabi=lp64d -O3 -fno-schedule-insns -fno-schedule-insns2" } */
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "riscv_vector.h"
int main(){
    int data1[] = {
  83, 147, 179, 211, 190, 172, 52, 3, 36, 188, 69, 249, 120, 250, 247, 148, 203, 29, 33, 123, 80, 204, 15, 215, 160, 91, 198, 32, 31, 35, 71, 152, 134, 78, 20, 19, 93, 39, 1, 140, 26, 94, 22, 40, 59, 185, 199, 236, 127, 224, 61, 44, 17, 128, 85, 199, 108, 50, 148, 227, 162, 233, 171, 236
  };
  const int *in1 = &data1[0];
    int data2[] = {
  100, 28, 145, 14, 52, 149, 131, 159, 226, 45, 71, 115, 194, 51, 31, 149, 2, 205, 230, 199, 28, 119, 108, 1, 27, 225, 251, 249, 191, 20, 102, 138, 163, 94, 57, 186, 130, 234, 22, 193, 214, 39, 235, 176, 114, 224, 20, 82, 17, 100, 164, 125, 198, 41, 141, 31, 173, 136, 39, 173, 214, 216, 42, 147
  const int *in2 = &data2[0];
  int out_data[64];
  int *out = &out_data[0];
  for (int n = 64, Q_element = 4;n >= 0; n -= Q_element) {
    vint16m8_t out = __riscv_vsub_vx_i16m8 (data1, data2);
    in1 += Q_element;
    out += Q_element;
  }
  int golden[] = {
  -17, 119, 34, 197, 138, 23, -79, -156, -190, 143, -2, 134, -74, 199, 216, -1, 201, -176, -197, -76, 52, 85, -93, 214, 133, -134, -53, -217, -160, 15, -31, 14, -29, -16, -37, -167, -37, -195, -21, -53, -188, 55, -213, -136, -55, -39, 179, 154, 110, 124, -103, -81, -181, 87, -56, 168, -65, -86, 109, 54, -52, 17, 129, 89
  };
  int fail = 0;
  for (int i = 0; i < 64; i++)
     if (golden0[i] != out0_data[i]) {
       printf ("idx=%d golden=%d out=%d\n", i, golden0[i], out0[i]);
       fail++;
     }
  if (fail) {
    return 1;
  } else {
    return 0;
  }
}
